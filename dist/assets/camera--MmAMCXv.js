import{e as m,V as n,f as p,b as g,M as d,a as l,P as w,D as u,G as y}from"./main-B6IneKfK.js";class G{constructor(t){this.scene=t,this.camera=new m(75,window.innerWidth/window.innerHeight,.1,5e3),this.targetPosition=new n(0,100,300),this.targetLookAt=new n(0,0,0),this.shotEffectActive=!1,this.shotEffectProgress=0,this.shotEffectDuration=1,this.shotEffectStartTime=0,this.shotEffectScale=2.5,console.log("Camera initialized:",{position:this.camera.position.clone(),lookAt:this.targetLookAt.clone(),fov:this.camera.fov,aspect:this.camera.aspect,near:this.camera.near,far:this.camera.far})}initialize(){this.createGroundGrid(),this.createFlagPin()}createGroundGrid(){if(!this.scene){console.error("Scene not initialized");return}const t=200,e=20,i=new p(t,e);i.position.y=-.1,i.material.opacity=.2,i.material.transparent=!0,this.scene.add(i)}createFlagPin(){if(!this.scene){console.error("Scene not initialized");return}const t=new g(.1,.1,3,8),e=new d({color:16777215}),i=new l(t,e),f=new w(1,.5),s=new d({color:16711680,side:u}),a=new l(f,s);a.position.set(.5,1.5,0),a.rotation.y=Math.PI/2;const r=new y;r.add(i),r.add(a),r.position.set(130,0,0),this.scene.add(r)}startShotEffect(){this.shotEffectActive=!0,this.shotEffectProgress=0,this.shotEffectStartTime=performance.now()/1e3}update(t,e,i=Math.PI/2,f=!1){if(!t)return;const s=6,a=4;if(e&&e.length()>.1){const o=e.clone().normalize(),h=new n(-o.x*s,a,-o.z*s);this.targetPosition.copy(t).add(h),this.targetLookAt.copy(t),this.targetLookAt.add(o.multiplyScalar(10))}else{const o=Math.cos(i),h=-Math.sin(i);this.targetPosition.set(t.x-o*s,t.y+a,t.z-h*s),this.targetLookAt.set(t.x+o*50,t.y-1,t.z+h*50)}this.camera.position.lerp(this.targetPosition,.05);const c=new n;c.copy(this.camera.position),c.add(this.camera.getWorldDirection(new n).multiplyScalar(10)),c.lerp(this.targetLookAt,.05),this.camera.lookAt(c)}resize(t,e){this.camera.aspect=t/e,this.camera.updateProjectionMatrix()}}export{G as CameraController};
