import{d}from"./main-B6IneKfK.js";class y{constructor(){this.uiContainer=document.getElementById("ui-container"),this.uiContainer||(console.warn("UI container not found, creating one"),this.uiContainer=document.createElement("div"),this.uiContainer.id="ui-container",document.body.appendChild(this.uiContainer)),this.panel=document.createElement("div"),this.panel.id="game-info-panel",this.panel.style.position="absolute",this.panel.style.top="20px",this.panel.style.left="20px",this.panel.style.background="rgba(0,0,0,0.5)",this.panel.style.padding="20px 18px 18px 18px",this.panel.style.borderRadius="10px",this.panel.style.color="white",this.panel.style.fontFamily="Arial, sans-serif",this.panel.style.zIndex="1000",this.panel.style.display="flex",this.panel.style.flexDirection="column",this.panel.style.gap="12px",this.uiContainer.appendChild(this.panel),this.holeInfo=document.createElement("div"),this.holeInfo.id="hole-info",this.panel.appendChild(this.holeInfo),this.distanceInfo=document.createElement("div"),this.distanceInfo.id="distance-info",this.panel.appendChild(this.distanceInfo),this.windInfo=document.createElement("div"),this.windInfo.id="wind-info",this.windInfo.style.display="flex",this.windInfo.style.alignItems="center",this.panel.appendChild(this.windInfo),this.windSpeedDisplay=document.createElement("div"),this.windSpeedDisplay.style.marginRight="10px",this.windInfo.appendChild(this.windSpeedDisplay),this.windArrow=document.createElement("div"),this.windArrow.style.width="20px",this.windArrow.style.height="20px",this.windArrow.style.border="2px solid white",this.windArrow.style.borderRadius="50%",this.windArrow.style.position="relative",this.windInfo.appendChild(this.windArrow),this.arrowPointer=document.createElement("div"),this.arrowPointer.style.width="0",this.arrowPointer.style.height="0",this.arrowPointer.style.borderLeft="5px solid transparent",this.arrowPointer.style.borderRight="5px solid transparent",this.arrowPointer.style.borderBottom="10px solid white",this.arrowPointer.style.position="absolute",this.arrowPointer.style.top="50%",this.arrowPointer.style.left="50%",this.arrowPointer.style.transformOrigin="center",this.arrowPointer.style.transform="translate(-50%, -50%)",this.windArrow.appendChild(this.arrowPointer),this.clubSelector=document.createElement("div"),this.clubSelector.id="club-selector",this.clubSelector.style.marginTop="10px",this.clubSelector.style.background="rgba(0,0,0,0.5)",this.clubSelector.style.padding="10px",this.clubSelector.style.borderRadius="5px",this.clubSelector.style.pointerEvents="auto",this.panel.appendChild(this.clubSelector),this.clubAccuracyProfiles={driver:{perfect:.3,okay:.3,bad:.4},iron:{perfect:.4,okay:.3,bad:.3},wedge:{perfect:.5,okay:.3,bad:.2},putter:{perfect:.6,okay:.3,bad:.1}},this.terrain=null,this.powerMeter=document.getElementById("power-meter"),this.powerMeter||(this.powerMeter=document.createElement("div"),this.powerMeter.id="power-meter",this.uiContainer.appendChild(this.powerMeter)),this.accuracyBar=document.createElement("div"),this.accuracyBar.id="accuracy-bar",this.uiContainer.appendChild(this.accuracyBar),this.selectedClub="driver",this.physicsEngine=null,this.clubChanged=!1,this.holeSelector=document.createElement("div"),this.holeSelector.id="hole-selector",this.holeSelector.style.marginTop="10px",this.holeSelector.style.background="rgba(0,0,0,0.5)",this.holeSelector.style.padding="10px",this.holeSelector.style.borderRadius="5px",this.holeSelector.style.pointerEvents="auto",this.panel.appendChild(this.holeSelector);const t=document.createElement("button");t.textContent="Hole 1 (Par 3)",t.onclick=()=>window.loadHole(1),this.holeSelector.appendChild(t);const e=document.createElement("button");e.textContent="Hole 2 (Par 5)",e.onclick=()=>window.loadHole(2),this.holeSelector.appendChild(e),this.gameCompleteModal=document.createElement("div"),this.gameCompleteModal.id="game-complete-modal",this.gameCompleteModal.style.display="none",this.gameCompleteModal.style.position="fixed",this.gameCompleteModal.style.top="50%",this.gameCompleteModal.style.left="50%",this.gameCompleteModal.style.transform="translate(-50%, -50%)",this.gameCompleteModal.style.background="rgba(0,0,0,0.9)",this.gameCompleteModal.style.padding="20px",this.gameCompleteModal.style.borderRadius="10px",this.gameCompleteModal.style.color="white",this.gameCompleteModal.style.textAlign="center",this.gameCompleteModal.style.zIndex="1000",document.body.appendChild(this.gameCompleteModal),this.setupUI()}setupUI(){this.clubSelector.innerHTML="",["driver","iron","wedge","putter"].forEach(t=>{const e=document.createElement("button");e.textContent=t.charAt(0).toUpperCase()+t.slice(1),e.onclick=()=>this.selectClub(t),this.clubSelector.appendChild(e)}),this.powerMeter.style.width="30px",this.powerMeter.style.height="200px",this.powerMeter.style.backgroundColor="#aaaaaa",this.powerMeter.style.position="fixed",this.powerMeter.style.left="50px",this.powerMeter.style.bottom="20px",this.powerMeter.style.border="3px solid #000",this.powerMeter.style.borderRadius="5px",this.powerMeter.style.overflow="visible",this.powerMeter.style.zIndex="1000",this.idealPowerIndicator=document.createElement("div"),this.idealPowerIndicator.className="ideal-power-indicator",this.idealPowerIndicator.style.width="0",this.idealPowerIndicator.style.height="0",this.idealPowerIndicator.style.borderTop="10px solid transparent",this.idealPowerIndicator.style.borderBottom="10px solid transparent",this.idealPowerIndicator.style.borderLeft="15px solid red",this.idealPowerIndicator.style.position="absolute",this.idealPowerIndicator.style.right="-18px",this.idealPowerIndicator.style.bottom="50%",this.idealPowerIndicator.style.marginBottom="-5px",this.idealPowerIndicator.style.zIndex="1001",this.powerMeter.appendChild(this.idealPowerIndicator),this.accuracyBar.style.width="200px",this.accuracyBar.style.height="30px",this.accuracyBar.style.backgroundColor="#ddd",this.accuracyBar.style.position="fixed",this.accuracyBar.style.left="50%",this.accuracyBar.style.bottom="20px",this.accuracyBar.style.transform="translateX(-50%)",this.accuracyBar.style.border="2px solid #333",this.accuracyBar.style.borderRadius="5px",this.accuracyBar.style.overflow="hidden",this.accuracyBar.style.display="none",this.createAccuracyZones(),this.accuracySlider=document.createElement("div"),this.accuracySlider.className="accuracy-slider",this.accuracySlider.style.width="8px",this.accuracySlider.style.height="100%",this.accuracySlider.style.backgroundColor="white",this.accuracySlider.style.position="absolute",this.accuracySlider.style.top="0",this.accuracySlider.style.left="0",this.accuracySlider.style.zIndex="2",this.accuracyBar.appendChild(this.accuracySlider)}createAccuracyZones(){this.accuracyBar.querySelectorAll(".accuracy-zone").forEach(l=>l.remove());const e=this.clubAccuracyProfiles[this.selectedClub]||this.clubAccuracyProfiles.driver,i=e.bad/2,s=e.okay/2,o=[i,s,e.perfect,s,i],r=["#FF4444","#FFAA00","#44FF44","#FFAA00","#FF4444"];let n=0;for(let l=0;l<o.length;l++){const a=document.createElement("div");a.className="accuracy-zone",a.style.width=`${o[l]*100}%`,a.style.height="100%",a.style.backgroundColor=r[l],a.style.position="absolute",a.style.top="0",a.style.left=`${n*100}%`,this.accuracyBar.appendChild(a),n+=o[l]}}selectClub(t){console.log(`Club changed from ${this.selectedClub} to ${t}`),this.selectedClub=t;const e=this.clubSelector.getElementsByTagName("button");for(let i of e)i.style.backgroundColor=i.textContent.toLowerCase()===t?"#4CAF50":"";this.createAccuracyZones(),this.updateIdealPowerIndicator(),this.clubChanged=!0}getSelectedClub(){return this.selectedClub}updateHoleInfo(t,e,i){this.holeInfo.textContent=`Hole: ${t} | Par: ${e} | Strokes: ${i}`}updateDistance(t,e){const i=t.x-e.x,s=t.z-e.z,o=Math.sqrt(i*i+s*s);this.distanceInfo.textContent=`Distance to pin: ${Math.round(o)} yards`}updateWind(t,e){const i=performance.now()/1e3;if(i-(this.lastWindUpdate||0)<2)return;this.lastWindUpdate=i,this.windSpeedDisplay.textContent=`Wind: ${Math.round(t)} mph`;const s=d.radToDeg(e);this.arrowPointer.style.transform=`translate(-50%, -50%) rotate(${s}deg)`,this.arrowPointer.style.borderBottomColor=t>7.5?"#ff4444":"#44ff44"}setPhysicsEngine(t){this.physicsEngine=t,console.log("Physics engine set in UI Manager:",!!this.physicsEngine),console.log("Club distances cached:",this.physicsEngine?!!this.physicsEngine.clubDistancesCache:!1)}updatePowerMeter(t){console.log("Updating power meter with power:",t);const e=this.powerMeter.querySelector(".power-bar")||document.createElement("div");e.className="power-bar",e.style.width="100%",e.style.height=`${t*100}%`,e.style.backgroundColor=`hsl(${t*120}, 100%, 50%)`,e.style.position="absolute",e.style.left="0",e.style.bottom="0",e.style.transition="height 0.1s ease-out",this.powerMeter.contains(e)||(console.log("Adding power bar to power meter"),this.powerMeter.appendChild(e)),console.log("Power bar updated:",{height:e.style.height,backgroundColor:e.style.backgroundColor,inDOM:this.powerMeter.contains(e)})}updateIdealPowerIndicator(){if(!this.physicsEngine){console.log("Physics engine not available for power indicator");return}if(!this.idealPowerIndicator){console.log("Ideal power indicator element not found");return}console.log(`Updating ideal power indicator for ${this.selectedClub}`);const t=this.selectedClub;try{const e=this.physicsEngine.getIdealPowerToHole(t);if(isNaN(e)||e<=0){console.error("Invalid ideal power calculated:",e);return}const i=e/this.physicsEngine.maxPower;console.log(`Normalized power: ${(i*100).toFixed(0)}% of max`);const s=i>=.99,o=`${i*100}%`;this.idealPowerIndicator.style.bottom=o;const r=s?"#ff6666":"#00ff00";this.idealPowerIndicator.style.borderLeftColor=r,this.indicatorLabel||(this.indicatorLabel=document.createElement("div"),this.indicatorLabel.style.position="absolute",this.indicatorLabel.style.right="-60px",this.indicatorLabel.style.width="40px",this.indicatorLabel.style.textAlign="left",this.indicatorLabel.style.fontWeight="bold",this.indicatorLabel.style.fontSize="12px",this.indicatorLabel.style.color="#ffffff",this.indicatorLabel.style.textShadow="1px 1px 2px #000",this.indicatorLabel.style.zIndex="1001",this.powerMeter.appendChild(this.indicatorLabel)),this.indicatorLabel.textContent=s?"MAX":"IDEAL",this.indicatorLabel.style.bottom=o,this.indicatorLabel.style.marginBottom="-6px",console.log(`Indicator updated to position: ${o} (${(i*100).toFixed(0)}%), color: ${r}`)}catch(e){console.error("Error updating ideal power indicator:",e)}}showAccuracyBar(){this.accuracyBar.style.display="block",this.accuracyBar.style.animation="scaleIn 0.3s ease-out",this.accuracySlider.style.left="0"}hideAccuracyBar(){this.accuracyBar.style.display="none"}updateAccuracyBar(t){this.accuracySlider.style.left=`${t*100}%`}getAccuracyResult(t){const e=this.clubAccuracyProfiles[this.selectedClub]||this.clubAccuracyProfiles.driver,i=e.bad/2,o=i+e.okay/2,r=o+e.perfect,n=r+e.okay/2;return t>=o&&t<=r?"perfect":t>=i&&t<o||t>r&&t<=n?"okay":"bad"}showGameComplete(t){this.gameCompleteModal.innerHTML=`
            <h2>Game Complete!</h2>
            <p>Total Score: ${t} strokes</p>
            <button onclick="window.location.reload()">Play Again</button>
        `,this.gameCompleteModal.style.display="block"}}const c=document.createElement("style");c.textContent=`
@keyframes scaleIn {
    0% { transform: translateX(-50%) scale(0.5); opacity: 0; }
    100% { transform: translateX(-50%) scale(1); opacity: 1; }
}
`;document.head.appendChild(c);export{y as UIManager};
